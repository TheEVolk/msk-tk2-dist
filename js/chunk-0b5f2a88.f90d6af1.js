(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b5f2a88"],{"37fa":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("TabContent",[t.error?i("v-overlay",{attrs:{"z-index":1}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("Произошла ошибка")]),i("v-card-text",[t._v(t._s(t.error.message))]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"green darken-1",text:""}},[t._v(" Обновить ")])],1)],1)],1):i("v-container",{attrs:{"fill-height":""}},[i("v-row",{staticClass:"fill-height",attrs:{"align-content":"center",justify:"center"}},[i("v-col",{attrs:{cols:"6"}},[i("v-card",[i("v-card-text",[i("v-progress-linear",{attrs:{color:"deep-purple accent-4",indeterminate:"",rounded:"",height:"6"}})],1)],1)],1)],1)],1)],1)},n=[],r=i("2141"),s={components:{TabContent:r["a"]},props:["error","tab"],watch:{error:function(){this.error&&this.tab&&(this.tab.color="red")}}},o=s,l=i("2877"),c=i("6544"),u=i.n(c),d=i("8336"),p=i("b0af"),v=i("99d9"),h=i("62ad"),m=i("a523"),f=i("a797"),_=i("8e36"),g=i("0fd9"),b=i("2fa4"),k=Object(l["a"])(o,a,n,!1,null,null,null);e["a"]=k.exports;u()(k,{VBtn:d["a"],VCard:p["a"],VCardActions:v["a"],VCardText:v["c"],VCardTitle:v["d"],VCol:h["a"],VContainer:m["a"],VOverlay:f["a"],VProgressLinear:_["a"],VRow:g["a"],VSpacer:b["a"]})},"6ca7":function(t,e,i){},"9a0d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-list",{attrs:{nav:"",dense:""}},[i("v-list-item",{on:{click:function(){return t.platform.openUrl("https://my.msk.host/billmgr?startform="+t.type+"&id="+t.service.id+"&filter=on")}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-link")])],1),i("v-list-item-title",[t._v("Открыть в биллинге")])],1),i("v-list-item",{on:{click:t.openWindow}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-door")])],1),i("v-list-item-title",[t._v("Перейти в панель")])],1),i("History",{attrs:{service:t.service,type:t.type}}),t.type&&3==t.service.status?i("v-list-item",{on:{click:function(){return t.api.exec(t.type+".resume",{elid:t.service.elid}).then((function(){return t.$emit("update")}))}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-lightbulb-on")])],1),i("v-list-item-title",[t._v("Включить")])],1):t._e(),t.type&&2==t.service.status?i("v-list-item",{on:{click:function(){return t.api.exec(t.type+".suspend",{elid:t.service.elid}).then((function(){return t.$emit("update")}))}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-lightbulb-off")])],1),i("v-list-item-title",[t._v("Выключить")])],1):t._e(),i("Ips",{attrs:{service:t.service,type:t.type}})],1)},n=[],r=(i("ac1f"),i("96cf"),i("1da1")),s=i("a34a"),o=i.n(s),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("MyDialog",{attrs:{width:"100%",loading:!t.data,title:"История услуги"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-list-item",t._g(t._b({},"v-list-item",n,!1),a),[i("v-list-item-icon",[i("v-icon",[t._v("mdi-book")])],1),i("v-list-item-title",[t._v("История")])],1)]}}])},[t.data?i("v-container",[i("v-simple-table",{attrs:{dense:""}},[i("thead",[i("tr",[i("th",[t._v("Дата")]),i("th",[t._v("Описание")]),i("th",[t._v("Кто")]),i("th",[t._v("IP")]),i("th",[t._v("Функция")])])]),i("tbody",t._l(t.data,(function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(e.changedate))]),i("td",[t._v(t._s(e.desc))]),i("td",[t._v(t._s(e.user))]),i("td",[t._v(t._s(e.ip))]),i("td",[t._v(t._s(e.action))])])})),0)])],1):t._e()],1)},c=[],u=i("f0c0"),d={components:{MyDialog:u["a"]},props:["service","type"],data:function(){return{data:null}},asyncComputed:{data:function(){return this.api.exec("service.history",{elid:this.service.elid}).then((function(t){return t.sort((function(t,e){return Date.parse(e.changedate)-Date.parse(t.changedate)}))}))}}},p=d,v=i("2877"),h=i("6544"),m=i.n(h),f=i("a523"),_=i("132d"),g=i("da13"),b=i("34c3"),k=i("5d23"),y=i("1f4f"),x=Object(v["a"])(p,l,c,!1,null,null,null),V=x.exports;m()(x,{VContainer:f["a"],VIcon:_["a"],VListItem:g["a"],VListItemIcon:b["a"],VListItemTitle:k["c"],VSimpleTable:y["a"]});var I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("MyDialog",{attrs:{title:"IP адреса услуги",loading:!t.data},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-list-item",t._g(t._b({},"v-list-item",n,!1),a),[i("v-list-item-icon",[i("v-icon",[t._v("mdi-network-strength-4")])],1),i("v-list-item-title",[t._v("IP Адреса")])],1)]}}])},[t.data?i("v-container",[i("v-list",{staticStyle:{width:"100%","overflow-x":"hidden !important"},attrs:{dense:""}},[t._l(t.data,(function(e){return i("Ip",{key:e.id,attrs:{service:t.service,item:e}})})),i("NewIp",{attrs:{service:t.service}})],2)],1):t._e()],1)},w=[],C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("MyDialog",{attrs:{width:"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-list-item",t._g(t._b({attrs:{"three-line":""}},"v-list-item",n,!1),a),[i("v-list-item-content",[i("v-list-item-title",[i("IpParser",{attrs:{value:t.item.name}})],1),i("v-list-item-subtitle",[t._v(t._s(t.item.domain)+"]")]),"on"===t.item.is_main?i("v-list-item-subtitle",[t._v("Главный")]):t._e(),"2"!==t.item.ip_status?i("v-list-item-subtitle",[t._v("Обрабатывается")]):t._e()],1)],1)]}},{key:"title",fn:function(){return[i("IpParser",{attrs:{value:t.item.name}})]},proxy:!0}])},[t.data?i("v-container",[i("v-text-field",{attrs:{label:"Домен"},model:{value:t.data.domain,callback:function(e){t.$set(t.data,"domain",e)},expression:"data.domain"}}),i("v-text-field",{attrs:{disabled:"",label:"Маска подсети"},model:{value:t.mask,callback:function(e){t.mask=e},expression:"mask"}}),i("v-text-field",{attrs:{disabled:"",label:"Шлюз"},model:{value:t.gateway,callback:function(e){t.gateway=e},expression:"gateway"}})],1):t._e(),i("v-card-actions",[i("v-btn",{attrs:{color:"primary"}},[t._v("Сохранить")]),i("RemoveIp",{attrs:{service:t.service,item:t.item}})],1)],1)},D=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("MyDialog",{attrs:{title:"Удаление "+t.item.name,loading:!t.data},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-btn",t._g(t._b({attrs:{color:"error"}},"v-btn",n,!1),a),[t._v("Удалить")])]}}])},[t.data?i("v-container"):t._e(),i("v-card-actions",[i("v-btn",{attrs:{color:"error",loading:t.loading},on:{click:t.deleteIt}},[t._v("Удалить")])],1)],1)},$=[],L={components:{MyDialog:u["a"]},props:["service","item"],data:function(){return{data:null,loading:!1}},mounted:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.exec("service.ip.del.admin",{plid:t.service.elid,elid:t.item.id});case 2:t.data=e.sent,t.cost=t.data.cost;case 4:case"end":return e.stop()}}),e)})))()},methods:{deleteIt:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){var i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.api.exec("service.ip.del.admin",{plid:t.service.elid,elid:t.item.id,noexpense:"on",manual:"off",ipcount:1,cost:0,clicked_button:"ok",sok:"ok"});case 3:if(i=e.sent,!i.error){e.next=8;break}return alert(i.error.msg),t.loading=!1,e.abrupt("return");case 8:alert("Успех блин"),t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()}}},O=L,j=i("8336"),A=i("99d9"),T=Object(v["a"])(O,S,$,!1,null,null,null),E=T.exports;m()(T,{VBtn:j["a"],VCardActions:A["a"],VContainer:f["a"]});var M=i("ca46"),P={components:{RemoveIp:E,IpParser:M["a"],MyDialog:u["a"]},props:["service","item"],data:function(){return{data:null,domain:"",mask:"",gateway:""}},mounted:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.exec("service.ip.edit",{plid:t.service.elid,elid:t.item.id});case 2:t.data=e.sent,t.domain=t.data.domain,t.mask=t.data.mask,t.gateway=t.data.gateway;case 6:case"end":return e.stop()}}),e)})))()}},B=P,F=i("8654"),R=Object(v["a"])(B,C,D,!1,null,null,null),z=R.exports;m()(R,{VBtn:j["a"],VCardActions:A["a"],VContainer:f["a"],VListItem:g["a"],VListItemContent:k["a"],VListItemSubtitle:k["b"],VListItemTitle:k["c"],VTextField:F["a"]});var N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("MyDialog",{attrs:{title:"Новый IP",loading:!t.data},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("v-list-item",t._g(t._b({},"v-list-item",n,!1),a),[i("v-list-item-content",[i("v-list-item-title",[t._v("Создать")])],1)],1)]}}])},[t.data?i("v-container",[i("v-text-field",{attrs:{label:"Домен"},model:{value:t.data.domain,callback:function(e){t.$set(t.data,"domain",e)},expression:"data.domain"}})],1):i("v-progress-circular",{staticClass:"mr-2",attrs:{size:"14",width:"2",indeterminate:"",color:"primary"}}),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",loading:t.loading},on:{click:t.createIt}},[t._v("Создать")])],1)],1)},W=[],H={components:{MyDialog:u["a"]},props:["service"],data:function(){return{data:null,loading:!1}},mounted:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.exec("service.ip.edit",{plid:t.service.elid});case 2:t.data=e.sent;case 3:case"end":return e.stop()}}),e)})))()},methods:{createIt:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){var i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.api.exec("service.ip.edit",{plid:t.service.elid,noexpense:"on",type:t.data.type,maxcount:1,manual:"off",domain:t.data.domain,count:1,postpaid:"off",needreboot:"on",clicked_button:"ok",sok:"ok"});case 3:if(i=e.sent,!i.error){e.next=8;break}return alert(i.error.msg),t.loading=!1,e.abrupt("return");case 8:alert("Успех блин"),t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()}}},J=H,K=i("490a"),U=Object(v["a"])(J,N,W,!1,null,null,null),q=U.exports;m()(U,{VBtn:j["a"],VCardActions:A["a"],VContainer:f["a"],VListItem:g["a"],VListItemContent:k["a"],VListItemTitle:k["c"],VProgressCircular:K["a"],VTextField:F["a"]});var G={components:{Ip:z,NewIp:q,MyDialog:u["a"]},props:["service","type"],data:function(){return{data:null}},mounted:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.exec("service.ip",{elid:t.service.elid});case 2:t.data=e.sent;case 3:case"end":return e.stop()}}),e)})))()}},Q=G,X=i("8860"),Y=Object(v["a"])(Q,I,w,!1,null,null,null),Z=Y.exports;m()(Y,{VContainer:f["a"],VIcon:_["a"],VList:X["a"],VListItem:g["a"],VListItemIcon:b["a"],VListItemTitle:k["c"]});var tt={components:{History:V,Ips:Z},props:["service","type"],methods:{openWindow:function(){var t=this;return Object(r["a"])(o.a.mark((function e(){var i;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.api.exec("gotoserver",{elid:t.service.elid}).catch((function(){return!1}));case 2:i=e.sent,i||alert("У этой услуги нет панели управления или она не работает."),t.platform.openPanelWindow(i.ok,t.service.elid);case 5:case"end":return e.stop()}}),e)})))()}}},et=tt,it=Object(v["a"])(et,a,n,!1,null,null,null);e["a"]=it.exports;m()(it,{VIcon:_["a"],VList:X["a"],VListItem:g["a"],VListItemIcon:b["a"],VListItemTitle:k["c"]})},ac7c:function(t,e,i){"use strict";i("6ca7"),i("ec29");var a=i("9d26"),n=i("c37a"),r=i("5607"),s=i("a026"),o=s["a"].extend({name:"rippleable",directives:{ripple:r["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),l=i("8547"),c=i("58df");function u(t){t.preventDefault()}var d=Object(c["a"])(n["a"],o,l["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=n["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:u},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:u},ref:"input"})},onBlur(){this.isFocused=!1},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(){this.isFocused=!0},onKeydown(t){}}});e["a"]=d.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...n["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick(()=>this.inputIndeterminate=t)},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(a["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...this.attrs$,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},ca46:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.ipData?i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[i("span",t._g(t._b({directives:[{name:"longclick",rawName:"v-longclick",value:t.update,expression:"update"}],style:"color: "+t.color,on:{dblclick:function(e){return e.preventDefault(),e.stopPropagation(),t.update(e)},click:function(t){t.preventDefault(),t.stopPropagation()}}},"span",n,!1),a),[t._v(t._s(t.value))])]}}],null,!1,1692136375)},[i("span",[t._v(t._s(t.ipData.services.join(", ")))])]):t._e()},n=[],r={props:["value"],data:function(){return{ipData:null}},mounted:function(){this.ipData=this.api.ipService.get(this.value)},methods:{update:function(){this.api.ipService.update(this.ipData)}},computed:{color:function(){return this.ipData.loading?"gray":this.ipData.alive?"#a3e6a3":"red"}}},s=r,o=i("2877"),l=i("6544"),c=i.n(l),u=i("3a2f"),d=Object(o["a"])(s,a,n,!1,null,null,null);e["a"]=d.exports;c()(d,{VTooltip:u["a"]})},ec29:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0b5f2a88.f90d6af1.js.map