{"version":3,"sources":["webpack:///./node_modules/electron-find/src/findInPage.js","webpack:///./node_modules/electron-find/src/utils.js","webpack:///./node_modules/electron/index.js","webpack:///./node_modules/electron-find/src/find.js","webpack:///./node_modules/electron-find/src/index.js","webpack:///./src/render/plugins/platform/electronPlatform.js"],"names":["Find","print","on","off","move","INPUT_INTERVAL_THRESHOLD","findBox","Symbol","findInput","findMatches","findCase","findBack","findForward","findClose","hasOpened","matchCase","documentKeydown","inputFocus","inputBlur","inputEvent","compositionstart","compositionend","caseMouseenter","caseMouseleave","caseClick","backMouseenter","backMouseleave","backClick","forwardMouseenter","forwardMouseleave","forwardClick","closeMouseenter","closeMouseleave","closeClick","events","inComposition","action","lastText","inputCnt","initialized","config","FindInPage","webContents","options","super","this","parentElement","document","body","duration","preload","initialize","initFind","creatElement","getUserConfig","call","setBoxStyle","setInputStyle","setMatchesStyle","setCaseStyle","setBackStyle","setForwardStyle","setCloseStyle","lockNext","creatEventHandler","bindEvents","appendElement","onResult","offsetHeight","focusInput","setTimeout","style","parseInt","offsetTop","then","catch","err","value","innerText","destroyFind","unbindEvents","closeFindWindow","removeElement","className","tag","ele","createElement","classList","add","offsetRight","boxBgColor","boxShadowColor","inputColor","inputBgColor","inputFocusColor","textColor","textHoverBgColor","caseSelectedColor","cssText","backLine","appendChild","backCover","forwardLine","forwardCover","closeInner1","closeInner2","forEach","item","removeChild","e","onKeydown","bind","push","name","fn","border","updateCnt","isInputing","res","onInput","onCaseClick","onBackClick","onForwardClick","onCloseClick","Promise","resolve","reject","currCnt","doBlur","blur","focus","wrapInput","inputEle","caseEle","timeout","type","unwrapInput","text","startFind","stopFind","code","shiftKey","findKeep","forward","isFinding","findNext","activeMatch","matches","unlockNext","module","exports","debug","console","log","addEventListener","element","event","handler","attachEvent","removeEventListener","detachEvent","once","listener","apply","arguments","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","callback","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","msCancelAnimationFrame","oCancelAnimationFrame","id","clearTimeout","end","winFrameId","stepTime","curr","top","stepDist","stepCnt","step","Math","abs","error","path","pathFile","join","__dirname","getElectronPath","fs","existsSync","executablePath","readFileSync","ELECTRON_OVERRIDE_DIST_PATH","Error","EventEmitter","stopActions","wcs","opts","requestId","initd","preText","isWebContents","bindFound","findInPage","includes","stopFindInPage","r","onFoundInPage","result","activeMatchOrdinal","finalUpdate","reportResult","emit","ElectronPlatform","alert","str","remote","dialog","showMessageBoxSync","buttons","defaultId","cancelId","detail","message","confirm","buttonIdx","getCurrentWebContents","ipcRenderer","args","openFindWindow","tabMgr","open","url","shell","openExternal","channel","send","sessionId","invoke"],"mappings":"qGAAA,MAAMA,EAAO,EAAQ,SACf,MAAEC,EAAK,GAAEC,EAAE,IAAEC,EAAG,KAAEC,GAAS,EAAQ,QAEnCC,EAA2B,IAE3BC,EAAUC,OAAO,WACjBC,EAAYD,OAAO,aACnBE,EAAcF,OAAO,eACrBG,EAAWH,OAAO,YAClBI,EAAWJ,OAAO,YAClBK,EAAcL,OAAO,eACrBM,EAAYN,OAAO,aACnBO,EAAYP,OAAO,aACnBQ,EAAYR,OAAO,aAEnBS,EAAkBT,OAAO,mBACzBU,EAAaV,OAAO,cACpBW,EAAYX,OAAO,aACnBY,EAAaZ,OAAO,cACpBa,EAAmBb,OAAO,oBAC1Bc,EAAiBd,OAAO,kBACxBe,EAAiBf,OAAO,kBACxBgB,EAAiBhB,OAAO,kBACxBiB,EAAYjB,OAAO,aACnBkB,EAAiBlB,OAAO,kBACxBmB,EAAiBnB,OAAO,kBACxBoB,EAAYpB,OAAO,aACnBqB,EAAoBrB,OAAO,qBAC3BsB,EAAoBtB,OAAO,qBAC3BuB,EAAevB,OAAO,gBACtBwB,EAAkBxB,OAAO,mBACzByB,EAAkBzB,OAAO,mBACzB0B,EAAa1B,OAAO,cACpB2B,EAAS3B,OAAO,UAEhB4B,EAAgB5B,OAAO,iBACvB6B,EAAS7B,OAAO,UAChB8B,EAAW9B,OAAO,YAClB+B,EAAW/B,OAAO,YAClBgC,EAAchC,OAAO,eACrBiC,EAASjC,OAAO,UAEtB,MAAMkC,UAAmBzC,EACvB,YAAa0C,EAAaC,EAAU,IAClCC,MAAMF,GACNG,KAAKvC,GAAW,KAChBuC,KAAKrC,GAAa,KAClBqC,KAAKpC,GAAe,KACpBoC,KAAKnC,GAAY,KACjBmC,KAAKlC,GAAY,KACjBkC,KAAKjC,GAAe,KACpBiC,KAAKhC,GAAa,KAClBgC,KAAK/B,IAAa,EAClB+B,KAAK9B,IAAa,EAClB8B,KAAKV,IAAiB,EACtBU,KAAKT,GAAU,GACfS,KAAKR,GAAY,GACjBQ,KAAKP,GAAY,EACjBO,KAAKN,IAAe,EACpBM,KAAKL,GAAU,GACfK,KAAKX,GAAU,GACfW,KAAKC,cAAgBH,EAAQG,cAAgBH,EAAQG,cAAgBC,SAASC,KAC9EH,KAAKI,SAAwC,kBAArBN,EAAQM,UAAyBN,EAAQM,SAAW,EAAKN,EAAQM,SAAW,IACpGJ,KAAKF,QAAUA,EACfE,KAAKF,QAAQO,SAAUL,KAAKM,aAE9B,aACE,OAAIN,KAAKN,IACPtC,EAAM,iCACC,GAEJ4C,KAAKO,YAIVP,KAAKvC,GAAW+C,EAAa,YAC7BR,KAAKrC,GAAa6C,EAAa,aAAc,SAC7CR,KAAKpC,GAAe4C,EAAa,gBACjCR,KAAKnC,GAAY2C,EAAa,aAC9BR,KAAKlC,GAAY0C,EAAa,aAC9BR,KAAKjC,GAAeyC,EAAa,gBACjCR,KAAKhC,GAAawC,EAAa,cAC/BC,EAAcC,KAAKV,KAAMA,KAAKF,SAC9Ba,EAAYD,KAAKV,MACjBY,EAAcF,KAAKV,MACnBa,EAAgBH,KAAKV,MACrBc,EAAaJ,KAAKV,MAClBe,EAAaL,KAAKV,MAClBgB,EAAgBN,KAAKV,MACrBiB,EAAcP,KAAKV,MACnBkB,GAASR,KAAKV,MACdmB,GAAkBT,KAAKV,MACvBoB,GAAWV,KAAKV,MAChBqB,EAAcX,KAAKV,MACnBsB,GAASZ,KAAKV,MACdzC,EAAKyC,KAAKvC,GAAW,EAAIuC,KAAKvC,GAAS8D,aAAe,GAAKvB,KAAKI,UACzDJ,KAAKN,IAAe,IAxBzBtC,EAAM,uCACC,GAyBX,iBACE,OAAI4C,KAAK/B,IACPuD,GAAWd,KAAKV,OACT,KAEJA,KAAKM,eACVmB,WAAW,KACTzB,KAAKvC,GAASiE,MAAM,cAAgB,UACpCR,GAASR,KAAKV,MACdwB,GAAWd,KAAKV,OACf,IACHzC,EAAKyC,KAAKvC,GAAUkE,SAAS3B,KAAKL,GAAQiC,WAAY5B,KAAKI,UACxDyB,KAAK,QACLC,MAAMC,IAAS,MAAMA,IACjB/B,KAAK/B,IAAa,GAE3B,kBACE,QAAK+B,KAAK/B,KACV+B,KAAKrC,GAAWqE,MAAQ,GACxBhC,KAAKT,GAAU,GACfS,KAAKR,GAAY,GACjBQ,KAAKpC,GAAaqE,UAAY,MAC9BjC,KAAK/B,IAAa,EAClBiD,GAASR,KAAKV,MACdzC,EAAKyC,KAAKvC,GAAW,EAAIuC,KAAKvC,GAAS8D,aAAe,GAAKvB,KAAKI,UAC7DyB,KAAK,KAAQ7B,KAAKvC,GAASiE,MAAM,cAAgB,WACjDI,MAAMC,IAAS,MAAMA,KACjB,GAET,UACE/B,KAAKkC,cACLC,GAAazB,KAAKV,MAClBA,KAAKoC,kBACLC,GAAc3B,KAAKV,OAIvB,SAASQ,EAAc8B,EAAY,GAAIC,EAAM,OAC3C,MAAMC,EAAMtC,SAASuC,cAAcF,GAEnC,OADAC,EAAIE,UAAUC,IAAIL,GACXE,EAET,SAAS/B,EAAeX,GACtBE,KAAKL,GAAQiC,UAAyC,kBAAtB9B,EAAQ8B,UAA4B9B,EAAQ8B,UAAX,KAA2B,MAC5F5B,KAAKL,GAAQiD,YAA6C,kBAAxB9C,EAAQ8C,YAA8B9C,EAAQ8C,YAAX,KAA6B,MAClG5C,KAAKL,GAAQkD,WAA2C,kBAAvB/C,EAAQ+C,WAA0B/C,EAAQ+C,WAAa,OACxF7C,KAAKL,GAAQmD,eAAmD,kBAA3BhD,EAAQgD,eAA8BhD,EAAQgD,eAAiB,UACpG9C,KAAKL,GAAQoD,WAA2C,kBAAvBjD,EAAQiD,WAA0BjD,EAAQiD,WAAa,UACxF/C,KAAKL,GAAQqD,aAA+C,kBAAzBlD,EAAQkD,aAA4BlD,EAAQkD,aAAe,UAC9FhD,KAAKL,GAAQsD,gBAAqD,kBAA5BnD,EAAQmD,gBAA+BnD,EAAQmD,gBAAkB,UACvGjD,KAAKL,GAAQuD,UAAyC,kBAAtBpD,EAAQoD,UAAyBpD,EAAQoD,UAAY,UACrFlD,KAAKL,GAAQwD,iBAAuD,kBAA7BrD,EAAQqD,iBAAgCrD,EAAQqD,iBAAmB,UAC1GnD,KAAKL,GAAQyD,kBAAyD,kBAA9BtD,EAAQsD,kBAAiCtD,EAAQsD,kBAAoB,UAE/G,SAASzC,IACPX,KAAKvC,GAASiE,MAAM2B,QAAU,2FACpBrD,KAAKL,GAAQiD,qIACyB5C,KAAKL,GAAQkD,mDAC3B7C,KAAKL,GAAQmD,kBAEjD,SAASlC,IACPZ,KAAKrC,GAAW+D,MAAM2B,QAAU,4CAA4CrD,KAAKL,GAAQqD,kCAC1EhD,KAAKL,GAAQqD,4DAA4DhD,KAAKL,GAAQoD,aAEvG,SAASlC,IACPb,KAAKpC,GAAaqE,UAAY,MAC9BjC,KAAKpC,GAAa8D,MAAM2B,QAAU,SAASrD,KAAKL,GAAQuD,gKAG1D,SAASpC,IACPd,KAAKnC,GAAUoE,UAAY,KAC3BjC,KAAKnC,GAAU6D,MAAM2B,QAAU,oFAAoFrD,KAAKL,GAAQuD,yIAGlI,SAASnC,IACPf,KAAKlC,GAAU4D,MAAM2B,QAAU,wKACyBrD,KAAKL,GAAQkD,gCAAgC7C,KAAKL,GAAQkD,cAElH,IAAIS,EAAW9C,EAAa,kBAC5B8C,EAAS5B,MAAM2B,QAAU,uEAAuErD,KAAKL,GAAQuD,0DAE7GlD,KAAKlC,GAAUyF,YAAYD,GAE3B,IAAIE,EAAYhD,EAAa,mBAC7BgD,EAAU9B,MAAM2B,QAAU,yIAE1BrD,KAAKlC,GAAUyF,YAAYC,GAE7B,SAASxC,IACPhB,KAAKjC,GAAa2D,MAAM2B,QAAU,wKACsBrD,KAAKL,GAAQkD,gCAAgC7C,KAAKL,GAAQkD,cAElH,IAAIY,EAAcjD,EAAa,qBAC/BiD,EAAY/B,MAAM2B,QAAU,sEAAsErD,KAAKL,GAAQuD,yDAE/GlD,KAAKjC,GAAawF,YAAYE,GAE9B,IAAIC,EAAelD,EAAa,sBAChCkD,EAAahC,MAAM2B,QAAU,wIAE7BrD,KAAKjC,GAAawF,YAAYG,GAEhC,SAASzC,IACPjB,KAAKhC,GAAW0D,MAAM2B,QAAU,qJACwBrD,KAAKL,GAAQkD,iCAErE,IAAIc,EAAcnD,EAAa,qBAC/BmD,EAAYjC,MAAM2B,QAAU,sCAAsCrD,KAAKL,GAAQuD,kFAE/ElD,KAAKhC,GAAWuF,YAAYI,GAE5B,IAAIC,EAAcpD,EAAa,qBAC/BoD,EAAYlC,MAAM2B,QAAU,sCAAsCrD,KAAKL,GAAQuD,iFAE/ElD,KAAKhC,GAAWuF,YAAYK,GAE9B,SAASvC,IACP,CAACrB,KAAKrC,GAAYqC,KAAKpC,GAAcoC,KAAKnC,GAAWmC,KAAKlC,GAAWkC,KAAKjC,GAAciC,KAAKhC,IAAY6F,QAASC,IAChH9D,KAAKvC,GAAS8F,YAAYO,KAE5B9D,KAAKC,cAAcsD,YAAYvD,KAAKvC,IAEtC,SAAS4E,KACPrC,KAAKC,cAAc8D,YAAY/D,KAAKvC,IAEtC,SAAS0D,KACPnB,KAAK7B,GAAmB,SAAW6F,GAC5BhE,KAAK/B,IACVgG,GAAUvD,KAAKV,KAAMgE,IACpBE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKtC,SAAUkE,KAAM,UAAWC,GAAIrE,KAAK7B,KAE7D6B,KAAK5B,GAAc,WACjB4B,KAAKrC,GAAW+D,MAAM4C,OAAS,aAAatE,KAAKL,GAAQsD,iBACxDiB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKrC,GAAYyG,KAAM,QAASC,GAAIrE,KAAK5B,KAElE4B,KAAK3B,GAAa,WAChB2B,KAAKrC,GAAW+D,MAAM4C,OAAS,aAAatE,KAAKL,GAAQqD,cACxDkB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKrC,GAAYyG,KAAM,OAAQC,GAAIrE,KAAK3B,KAEjE2B,KAAK1B,GAAc,WACjBiG,GAAU7D,KAAKV,MACfwE,GAAW9D,KAAKV,MACb6B,KAAK4C,KACJA,GAAWC,GAAQhE,KAAKV,SAE3BkE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKrC,GAAYyG,KAAM,QAASC,GAAIrE,KAAK1B,KAElE0B,KAAKzB,GAAoB,WACvBnB,EAAM,oBACN4C,KAAKV,IAAiB,GACrB4E,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKrC,GAAYyG,KAAM,mBAAoBC,GAAIrE,KAAKzB,KAE7EyB,KAAKxB,GAAkB,WACrBpB,EAAM,kBACN4C,KAAKV,IAAiB,GACrB4E,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKrC,GAAYyG,KAAM,iBAAkBC,GAAIrE,KAAKxB,KAE3EwB,KAAKvB,GAAkB,WACrBuB,KAAKnC,GAAU6D,MAAM,cAAgB1B,KAAKL,GAAQwD,kBACjDe,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKnC,GAAWuG,KAAM,aAAcC,GAAIrE,KAAKvB,KAEtEuB,KAAKtB,GAAkB,WACrBsB,KAAKnC,GAAU6D,MAAM,cAAgB1B,KAAKL,GAAQkD,YACjDqB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKnC,GAAWuG,KAAM,aAAcC,GAAIrE,KAAKtB,KAEtEsB,KAAKrB,GAAa,WAChBgG,GAAYjE,KAAKV,OAChBkE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKnC,GAAWuG,KAAM,QAASC,GAAIrE,KAAKrB,KAEjEqB,KAAKpB,GAAkB,WACrBoB,KAAKlC,GAAU4D,MAAM,cAAgB1B,KAAKL,GAAQwD,iBAClDnD,KAAKlC,GAAU4D,MAAM,UAAY,aAAa1B,KAAKL,GAAQwD,kBAC1De,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKlC,GAAWsG,KAAM,aAAcC,GAAIrE,KAAKpB,KAEtEoB,KAAKnB,GAAkB,WACrBmB,KAAKlC,GAAU4D,MAAM,cAAgB1B,KAAKL,GAAQkD,WAClD7C,KAAKlC,GAAU4D,MAAM,UAAY,aAAa1B,KAAKL,GAAQkD,YAC1DqB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKlC,GAAWsG,KAAM,aAAcC,GAAIrE,KAAKnB,KAEtEmB,KAAKlB,GAAa,WAChB8F,GAAYlE,KAAKV,OAChBkE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKlC,GAAWsG,KAAM,QAASC,GAAIrE,KAAKlB,KAEjEkB,KAAKjB,GAAqB,WACxBiB,KAAKjC,GAAa2D,MAAM,cAAgB1B,KAAKL,GAAQwD,iBACrDnD,KAAKjC,GAAa2D,MAAM,UAAY,aAAa1B,KAAKL,GAAQwD,kBAC7De,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKjC,GAAcqG,KAAM,aAAcC,GAAIrE,KAAKjB,KAEzEiB,KAAKhB,GAAqB,WACxBgB,KAAKjC,GAAa2D,MAAM,cAAgB1B,KAAKL,GAAQkD,WACrD7C,KAAKjC,GAAa2D,MAAM,UAAY,aAAa1B,KAAKL,GAAQkD,YAC7DqB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKjC,GAAcqG,KAAM,aAAcC,GAAIrE,KAAKhB,KAEzEgB,KAAKf,GAAgB,WACnB4F,GAAenE,KAAKV,OACnBkE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKjC,GAAcqG,KAAM,QAASC,GAAIrE,KAAKf,KAEpEe,KAAKd,GAAmB,WACtBc,KAAKhC,GAAW0D,MAAM,cAAgB1B,KAAKL,GAAQwD,kBAClDe,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKhC,GAAYoG,KAAM,aAAcC,GAAIrE,KAAKd,KAEvEc,KAAKb,GAAmB,WACtBa,KAAKhC,GAAW0D,MAAM,cAAgB1B,KAAKL,GAAQkD,YAClDqB,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKhC,GAAYoG,KAAM,aAAcC,GAAIrE,KAAKb,KAEvEa,KAAKZ,GAAc,WACjB0F,GAAapE,KAAKV,OACjBkE,KAAKlE,MACRA,KAAKX,GAAQ8E,KAAK,CAAE3B,IAAKxC,KAAKhC,GAAYoG,KAAM,QAASC,GAAIrE,KAAKZ,KAGpE,SAASgC,KACPpB,KAAKX,GAAQwE,QAASC,IACpBzG,EAAGyG,EAAKtB,IAAKsB,EAAKM,KAAMN,EAAKO,MAGjC,SAASlC,KACPnC,KAAKX,GAAQwE,QAASC,IACpBxG,EAAIwG,EAAKtB,IAAKsB,EAAKM,KAAMN,EAAKO,MAIlC,SAASE,KACHvE,KAAKP,IAAa,aACpBO,KAAKP,GAAY,GAEnBO,KAAKP,KAGP,SAAS+E,KACP,OAAO,IAAIO,QAAQ,CAACC,EAASC,KAC3B,IAAIC,EAAUlF,KAAKP,GACnBgC,WAAW,KACTyD,IAAYlF,KAAKP,GAAYuF,GAAQ,GAAQA,GAAQ,IACpDxH,KAIP,SAASgE,GAAY2D,GAAS,GAC5B1D,WAAW,KACT0D,GAASnF,KAAKrC,GAAWyH,OACzBpF,KAAKrC,GAAW0H,SACf,IAGL,SAASC,GAAWC,EAAUC,EAASC,EAAU,IAC/CF,EAASG,KAAO,WAChBF,EAAQ9D,MAAM,cAAgB,SAE9BD,WAAW,KACa,SAAlB8D,EAASG,OACXtI,EAAM,oCACNuI,GAAYJ,EAAUC,KAEvBC,GAEL,SAASE,GAAaJ,EAAUC,GAC9BD,EAASG,KAAO,OAChBF,EAAQ9D,MAAM,cAAgB,UAGhC,SAASgD,KACPjD,WAAW,KACT,GAAIzB,KAAKV,GAAgB,OACzBU,KAAKT,GAAU,QACf,IAAIqG,EAAO5F,KAAKrC,GAAWqE,MACvB4D,GAAQA,IAAS5F,KAAKR,IACxBQ,KAAKR,GAAYoG,EACjBN,GAAUtF,KAAKrC,GAAYqC,KAAKnC,GAAW,KAC3CmC,KAAK6F,UAAUD,GAAM,EAAM5F,KAAK9B,KACvB8B,KAAKR,IAAsB,KAAToG,IAC3B5F,KAAK8F,WACL9F,KAAKpC,GAAaqE,UAAY,MAC9Bf,GAASR,KAAKV,MACdwB,GAAWd,KAAKV,MAAM,KAEvB,IAGL,SAASiE,GAAWD,GAClB,IAAIhE,KAAKV,IAAmB0E,EAC5B,OAAQA,EAAE+B,MACR,IAAK,QACL,IAAK,cACH,IAAIH,EAAO5F,KAAKrC,GAAWqE,MAC3B,IAAK4D,EAAM,OACX5B,EAAEgC,SAAWC,GAASvF,KAAKV,MAAM,GAASiG,GAASvF,KAAKV,MAAM,GAC9D,MACF,IAAK,SACH8E,GAAapE,KAAKV,MAClB,MACF,QACE,OAIN,SAASiG,GAAUC,GACZlG,KAAKmG,cACVD,EAAUrB,GAAenE,KAAKV,MAAQ4E,GAAYlE,KAAKV,OAGzD,SAAS2E,KACF3E,KAAK9B,IAMR8B,KAAK9B,IAAa,EAClB8B,KAAKnC,GAAU6D,MAAM,gBAAkB,cACvC4D,GAAUtF,KAAKrC,GAAYqC,KAAKnC,GAAW,KAC3CmC,KAAK6F,UAAU7F,KAAKrC,GAAWqE,OAAO,EAAMhC,KAAK9B,MARjD8B,KAAK9B,IAAa,EAClB8B,KAAKnC,GAAU6D,MAAM,gBAAkB1B,KAAKL,GAAQyD,kBACpDkC,GAAUtF,KAAKrC,GAAYqC,KAAKnC,GAAW,KAC3CmC,KAAK6F,UAAU7F,KAAKrC,GAAWqE,OAAO,EAAMhC,KAAK9B,KASrD,SAAS0G,KACP5E,KAAKT,GAAU,OACf+F,GAAUtF,KAAKrC,GAAYqC,KAAKnC,GAAW,KAC3CmC,KAAKoG,UAAS,EAAOpG,KAAK9B,IAG5B,SAAS2G,KACP7E,KAAKT,GAAU,UACf+F,GAAUtF,KAAKrC,GAAYqC,KAAKnC,GAAW,KAC3CmC,KAAKoG,UAAS,EAAMpG,KAAK9B,IAG3B,SAAS4G,KACP9E,KAAKoC,mBAAoBpC,KAAK8F,WAGhC,SAASxE,KACPtB,KAAK3C,GAAG,SAAU,CAACgJ,EAAaC,KAC9BX,GAAY3F,KAAKrC,GAAYqC,KAAKnC,IAClCmC,KAAKpC,GAAaqE,UAAY,GAAGoE,KAAeC,IAChDA,EAAU,EAAIC,GAAW7F,KAAKV,MAAQkB,GAASR,KAAKV,MACnC,UAAjBA,KAAKT,IAAsBiC,GAAWd,KAAKV,QAI/C,SAASkB,KACPlB,KAAKlC,GAAU4D,MAAM,WAAa,GAClC1B,KAAKlC,GAAU4D,MAAM,kBAAoB,OACzC1B,KAAKjC,GAAa2D,MAAM,WAAa,GACrC1B,KAAKjC,GAAa2D,MAAM,kBAAoB,OAG9C,SAAS6E,KACPvG,KAAKlC,GAAU4D,MAAM,WAAa,EAClC1B,KAAKlC,GAAU4D,MAAM,kBAAoB,OACzC1B,KAAKjC,GAAa2D,MAAM,WAAa,EACrC1B,KAAKjC,GAAa2D,MAAM,kBAAoB,OAG9C8E,EAAOC,QAAU7G,G,0CCrdjB,MAAM8G,GAAQ,EACRtJ,EAAQsJ,EAAQC,QAAQC,IAAI1C,KAAKyC,SAAW,OAE5CtJ,EAAK,KACL6C,UAAYA,SAAS2G,iBAChB,CAACC,EAASC,EAAOC,KAClBF,GAAWC,GAASC,GACtBF,EAAQD,iBAAiBE,EAAOC,GAAS,IAGpC9G,UAAYA,SAAS+G,YACvB,CAACH,EAASC,EAAOC,KAClBF,GAAWC,GAASC,GACtBF,EAAQG,YAAY,KAAKF,EAASC,IAI/B,OAdA,GAkBL1J,EAAM,KACN4C,UAAYA,SAASgH,oBAChB,CAACJ,EAASC,EAAOC,KAClBF,GAAWC,GAASC,GACtBF,EAAQI,oBAAoBH,EAAOC,GAAS,IAGvC9G,UAAYA,SAASiH,YACvB,CAACL,EAASC,EAAOC,KAClBF,GAAWC,GAASC,GACtBF,EAAQK,YAAY,KAAKJ,EAASC,IAI/B,OAdC,GAkBNI,EAAO,CAACN,EAASC,EAAO1C,KAC5B,IAAIgD,EAAW,WACK,oBAAPhD,GACTA,EAAGiD,MAAMtH,KAAMuH,WAEjBjK,EAAIwJ,EAASC,EAAOM,IAEtBhK,EAAGyJ,EAASC,EAAOM,IAGrBG,OAAOC,sBAAwBD,OAAOC,uBACRD,OAAOE,6BACPF,OAAOG,0BACPH,OAAOI,yBACPJ,OAAOK,wBACP,SAAUC,GACR,OAAON,OAAO/F,WAAWqG,EAAU,IAAO,KAG1EN,OAAOO,qBAAuBP,OAAOO,sBACPP,OAAOQ,4BACPR,OAAOS,yBACPT,OAAOU,wBACPV,OAAOW,uBACP,SAAUC,GACRZ,OAAOa,aAAaD,IAGpD,MAAM7K,EAAO,CAACuJ,EAASwB,EAAKlI,EAAW,MAC9B,IAAI2E,QAAQ,CAACC,EAASC,KAC3B,IACE,IAAIsD,EAAa,KACbC,EAAWpI,GAAY,IAAO,IAC9BqI,EAAO9G,SAASmF,EAAQpF,MAAMgH,KAC9BC,GAAYL,EAAMG,GAAQD,EAC1BI,EAAU,EAEd,MAAMC,EAAO,WACXJ,GAAQE,EACRC,IACIA,GAAWJ,GAAaM,KAAKC,IAAIT,EAAMG,IAAUE,EAAW,GAC9D7B,EAAQpF,MAAMgH,IAASJ,EAAH,KAChBC,IACFf,OAAOO,qBAAqBQ,GAC5BA,EAAa,MAEfvD,MAEA8B,EAAQpF,MAAMgH,IAASD,EAAH,KACpBF,EAAaf,OAAOC,sBAAsBoB,KAG9CA,IACA,MAAOG,GACP/D,EAAO+D,MAObxC,EAAOC,QAAU,CACfrJ,QACAC,KACAC,MACA8J,OACA7J,S,sBCzGF,kBAAS,EAAQ,QACb0L,EAAO,EAAQ,QAEfC,EAAWD,EAAKE,KAAKC,EAAW,YAEpC,SAASC,IACP,GAAIC,EAAGC,WAAWL,GAAW,CAC3B,IAAIM,EAAiBF,EAAGG,aAAaP,EAAU,SAC/C,OAAI,6CAAYQ,4BACPT,EAAKE,KAAK,6CAAYO,4BAA6BF,GAErDP,EAAKE,KAAKC,EAAW,OAAQI,GAEpC,MAAM,IAAIG,MAAM,sGAIpBnD,EAAOC,QAAU4C,M,qCCjBjB,MAAMO,EAAe,EAAQ,SACvB,MAAExM,GAAU,EAAQ,QAEpByM,EAAc,CAAC,iBAAkB,gBAAiB,qBAClDC,EAAMpM,OAAO,eACbqM,EAAOrM,OAAO,WACdsM,EAAYtM,OAAO,aACnB2I,EAAc3I,OAAO,eACrB4I,EAAU5I,OAAO,WACjBuM,EAAQvM,OAAO,SACfwM,EAAUxM,OAAO,WAEvB,MAAMP,UAAayM,EACjB,YAAa/J,EAAaC,EAAU,IAClCC,QACAC,KAAK8J,GAAOjK,EACZG,KAAK+J,GAAQjK,EACbE,KAAKgK,GAAa,KAClBhK,KAAKqG,GAAe,EACpBrG,KAAKsG,GAAW,EAChBtG,KAAKiK,IAAS,EACdjK,KAAKkK,GAAW,GAElB,WACE,GAAIlK,KAAKiK,GAAQ,OAAO,EACxB,GAAIE,EAAczJ,KAAKV,MAErB,OADAoK,EAAU1J,KAAKV,MACRA,KAAKiK,IAAS,EAErB,MAAM,IAAIN,MAAM,2CAGpB,cACE3J,KAAK8J,GAAO,KACZ9J,KAAK+J,GAAS,KACd/J,KAAKgK,GAAa,KAClBhK,KAAKqG,GAAe,EACpBrG,KAAKsG,GAAW,EAChBtG,KAAKiK,IAAS,EACdjK,KAAKkK,GAAW,GAElB,YACE,QAASlK,KAAKgK,GAEhB,UAAWpE,EAAO,GAAIM,GAAU,EAAMhI,GAAY,GAC3C0H,IACL5F,KAAKqG,GAAe,EACpBrG,KAAKsG,GAAW,EAChBtG,KAAKkK,GAAWtE,EAChB5F,KAAKgK,GAAahK,KAAK8J,GAAKO,WAAWrK,KAAKkK,GAAU,CACpDhE,UACAhI,cAEFd,EAAM,yBAAyBwI,aAAgBM,eAAqBhI,MAEtE,SAAUgI,EAAShI,GAAY,GAC7B,IAAK8B,KAAKmG,YAAa,MAAM,IAAIwD,MAAM,+BACvC3J,KAAKgK,GAAahK,KAAK8J,GAAKO,WAAWrK,KAAKkK,GAAU,CACpDhE,UACAhI,YACAkI,UAAU,IAEZhJ,EAAM,wBAAwB4C,KAAKkK,cAAoBhE,eAAqBhI,KAE9E,SAAUqB,IACRsK,EAAYS,SAAS/K,KAAeA,EAAS,kBAC7CS,KAAK8J,GAAKS,eAAehL,GACzBnC,EAAM,0BAA0BmC,IAGpC,SAAS4K,IACP,OAAQnK,KAAK8J,IACqB,oBAAzB9J,KAAK8J,GAAKO,YACmB,oBAA7BrK,KAAK8J,GAAKS,eAErB,SAASH,IACPpK,KAAK8J,GAAKzM,GAAG,gBAAiB,CAAC2G,EAAGwG,KAChCC,EAAc/J,KAAKV,KAAMwK,KAG7B,SAASC,EAAeC,GACtBtN,EAAM,yBAA0BsN,GAC5B1K,KAAKgK,KAAeU,EAAOV,YACM,kBAA9BU,EAAOC,qBAAkC3K,KAAKqG,GAAeqE,EAAOC,oBACjD,kBAAnBD,EAAOpE,UAAuBtG,KAAKsG,GAAWoE,EAAOpE,SAC5DoE,EAAOE,aAAcC,EAAanK,KAAKV,OAEzC,SAAS6K,IACP7K,KAAK8K,KAAK,SAAU9K,KAAKqG,GAAcrG,KAAKsG,IACb,oBAAxBtG,KAAK+J,GAAMzI,UAA0BtB,KAAK+J,GAAMzI,SAAStB,KAAKqG,GAAcrG,KAAKsG,IAG1FE,EAAOC,QAAUtJ,G,qBC5FjB,MAAMyC,EAAY,EAAQ,QACpBzC,EAAO,EAAQ,QAGrBqJ,EAAOC,QAAU,CACf7G,aACAzC,S,mHCAI4N,E,WACJ,aAAc,uBAGZC,MAAQ,SAAUC,GAChBC,YAAOC,OAAOC,mBAAmB,KAAM,CACrC1F,KAAM,UACN2F,QAAS,CAAC,MACVC,UAAW,EACXC,SAAU,EACVC,OAAQP,EACRQ,QAAS,MAKbC,QAAU,SAAUT,GAClB,IAAMU,EAAYT,YAAOC,OAAOC,mBAAmB,KAAM,CACvD1F,KAAM,WACN2F,QAAS,CAAC,KAAM,UAChBC,UAAW,EACXC,SAAU,EACVC,OAAQP,EACRQ,QAAS,KAGX,OAAqB,IAAdE,GAGT,IAAMtB,EAAa,IAAIzK,gBAAWsL,YAAOU,wBAAyB,CAChEvL,SAAS,EACTuB,UAAW,GACXgB,YAAa,KAGfiJ,iBAAYxO,GAAG,WAAW,SAAC2G,EAAG8H,GAC5BzB,EAAW0B,oBAGbF,iBAAYxO,GAAG,WAAW,SAAC2G,EAAG8H,GAC5BE,OAAOC,KAAK,c,8CAIhB,SAAQC,GACNC,WAAMC,aAAaF,K,kBAGrB,SAAKG,GAAkB,2BAANP,EAAM,iCAANA,EAAM,kBACrBD,iBAAYS,KAAZ,MAAAT,iBAAW,CAAMQ,GAAN,OAAkBP,M,6BAG/B,SAAgBI,EAAKK,GACnBV,iBAAYW,OAAO,oBAAqBN,EAAKK,O,KAIlC,iBAAIxB","file":"js/chunk-42d462ae.2abb038b.js","sourcesContent":["const Find = require('./find.js')\r\nconst { print, on, off, move } = require('./utils.js')\r\n\r\nconst INPUT_INTERVAL_THRESHOLD = 360\r\n\r\nconst findBox = Symbol('findBox')\r\nconst findInput = Symbol('findInput')\r\nconst findMatches = Symbol('findMatches')\r\nconst findCase = Symbol('findCase')\r\nconst findBack = Symbol('findBack')\r\nconst findForward = Symbol('findForward')\r\nconst findClose = Symbol('findClose')\r\nconst hasOpened = Symbol('hasOpened')\r\nconst matchCase = Symbol('matchCase')\r\n\r\nconst documentKeydown = Symbol('documentKeydown')\r\nconst inputFocus = Symbol('inputFocus')\r\nconst inputBlur = Symbol('inputBlur')\r\nconst inputEvent = Symbol('inputEvent')\r\nconst compositionstart = Symbol('compositionstart')\r\nconst compositionend = Symbol('compositionend')\r\nconst caseMouseenter = Symbol('caseMouseenter')\r\nconst caseMouseleave = Symbol('caseMouseleave')\r\nconst caseClick = Symbol('caseClick')\r\nconst backMouseenter = Symbol('backMouseenter')\r\nconst backMouseleave = Symbol('backMouseleave')\r\nconst backClick = Symbol('backClick')\r\nconst forwardMouseenter = Symbol('forwardMouseenter')\r\nconst forwardMouseleave = Symbol('forwardMouseleave')\r\nconst forwardClick = Symbol('forwardClick')\r\nconst closeMouseenter = Symbol('closeMouseenter')\r\nconst closeMouseleave = Symbol('closeMouseleave')\r\nconst closeClick = Symbol('closeClick')\r\nconst events = Symbol('events')\r\n\r\nconst inComposition = Symbol('inComposition')\r\nconst action = Symbol('action')\r\nconst lastText = Symbol('lastText')\r\nconst inputCnt = Symbol('inputCnt')\r\nconst initialized = Symbol('initialized')\r\nconst config = Symbol('config')\r\n\r\nclass FindInPage extends Find{\r\n  constructor (webContents, options = {}) {\r\n    super(webContents)\r\n    this[findBox] = null\r\n    this[findInput] = null\r\n    this[findMatches] = null\r\n    this[findCase] = null\r\n    this[findBack] = null\r\n    this[findForward] = null\r\n    this[findClose] = null\r\n    this[hasOpened] = false\r\n    this[matchCase] = false\r\n    this[inComposition] = false\r\n    this[action] = ''\r\n    this[lastText] = ''\r\n    this[inputCnt] = 0\r\n    this[initialized] = false\r\n    this[config] = {}\r\n    this[events] = []\r\n    this.parentElement = options.parentElement ? options.parentElement : document.body\r\n    this.duration = (typeof options.duration === 'number' && options.duration > 0) ? options.duration : 300\r\n    this.options = options\r\n    this.options.preload ? this.initialize() : ''\r\n  }\r\n  initialize () {\r\n    if (this[initialized]) {\r\n      print('[FindInPage] Has initialize.')\r\n      return true\r\n    }\r\n    if (!this.initFind()) {\r\n      print('[FindInPage] Failed to initialize.')\r\n      return false\r\n    }\r\n    this[findBox] = creatElement('find-box')\r\n    this[findInput] = creatElement('find-input', 'input')\r\n    this[findMatches] = creatElement('find-matches')\r\n    this[findCase] = creatElement('find-case')\r\n    this[findBack] = creatElement('find-back')\r\n    this[findForward] = creatElement('find-forward')\r\n    this[findClose] = creatElement('find-close')\r\n    getUserConfig.call(this, this.options)\r\n    setBoxStyle.call(this)\r\n    setInputStyle.call(this)\r\n    setMatchesStyle.call(this)\r\n    setCaseStyle.call(this)\r\n    setBackStyle.call(this)\r\n    setForwardStyle.call(this)\r\n    setCloseStyle.call(this)\r\n    lockNext.call(this)\r\n    creatEventHandler.call(this)\r\n    bindEvents.call(this)\r\n    appendElement.call(this)\r\n    onResult.call(this)\r\n    move(this[findBox], (0 - this[findBox].offsetHeight - 10), this.duration)\r\n    return this[initialized] = true\r\n  }\r\n  openFindWindow () {\r\n    if (this[hasOpened]) {\r\n      focusInput.call(this)\r\n      return false\r\n    }\r\n    if (!this.initialize()) return false\r\n    setTimeout(() => {  \r\n      this[findBox].style['visibility'] = 'visible'\r\n      lockNext.call(this)\r\n      focusInput.call(this)\r\n    }, 10)\r\n    move(this[findBox], parseInt(this[config].offsetTop), this.duration)\r\n      .then(() => {})\r\n      .catch(err => { throw err })\r\n    return this[hasOpened] = true\r\n  }\r\n  closeFindWindow () {\r\n    if (!this[hasOpened]) return false\r\n    this[findInput].value = ''\r\n    this[action] = ''\r\n    this[lastText] = ''\r\n    this[findMatches].innerText = '0/0'\r\n    this[hasOpened] = false\r\n    lockNext.call(this)\r\n    move(this[findBox], (0 - this[findBox].offsetHeight - 10), this.duration)\r\n      .then(() => { this[findBox].style['visibility'] = 'hidden' })\r\n      .catch(err => { throw err })\r\n    return true\r\n  }\r\n  destroy () {\r\n    this.destroyFind()\r\n    unbindEvents.call(this)\r\n    this.closeFindWindow()\r\n    removeElement.call(this)\r\n  }\r\n}\r\n\r\nfunction creatElement (className = '', tag = 'div') {\r\n  const ele = document.createElement(tag)\r\n  ele.classList.add(className)\r\n  return ele\r\n}\r\nfunction getUserConfig (options) {\r\n  this[config].offsetTop = typeof options.offsetTop === 'number' ? `${options.offsetTop}px` : '5px'\r\n  this[config].offsetRight = typeof options.offsetRight === 'number' ? `${options.offsetRight}px` : '5px'\r\n  this[config].boxBgColor = typeof options.boxBgColor === 'string' ? options.boxBgColor : '#fff'\r\n  this[config].boxShadowColor = typeof options.boxShadowColor === 'string' ? options.boxShadowColor : '#909399'\r\n  this[config].inputColor = typeof options.inputColor === 'string' ? options.inputColor : '#606266'\r\n  this[config].inputBgColor = typeof options.inputBgColor === 'string' ? options.inputBgColor : '#f0f0f0'\r\n  this[config].inputFocusColor = typeof options.inputFocusColor === 'string' ? options.inputFocusColor : '#c5ade0'\r\n  this[config].textColor = typeof options.textColor === 'string' ? options.textColor : '#606266'\r\n  this[config].textHoverBgColor = typeof options.textHoverBgColor === 'string' ? options.textHoverBgColor : '#eaeaea'\r\n  this[config].caseSelectedColor = typeof options.caseSelectedColor === 'string' ? options.caseSelectedColor : '#c5ade0'\r\n}\r\nfunction setBoxStyle () {\r\n  this[findBox].style.cssText = `position:fixed; top:-110%; z-index: 3001; max-height:48px; min-height:30px; \r\n    right:${this[config].offsetRight}; display:flex; align-items:center; box-sizing:border-box !important;\r\n    padding:6px; visibility: hidden; background:${this[config].boxBgColor}; \r\n    box-shadow: 1px 1px 2px 0.5px ${this[config].boxShadowColor};`\r\n}\r\nfunction setInputStyle () {\r\n  this[findInput].style.cssText = `width:168px; outline:0; border:1px solid ${this[config].inputBgColor}; \r\n    background:${this[config].inputBgColor}; margin-right:6px; border-radius:2px; color:${this[config].inputColor}`\r\n}\r\nfunction setMatchesStyle () {\r\n  this[findMatches].innerText = '0/0'\r\n  this[findMatches].style.cssText = `color:${this[config].textColor}; font-size:14px; display:flex; align-items:center; \r\n    justify-content:center; min-width:40px; max-width:64px; overflow:hidden; margin-right:4px;`\r\n}\r\nfunction setCaseStyle () {\r\n  this[findCase].innerText = 'Aa'\r\n  this[findCase].style.cssText = `font-size:14px; font-weight:700; cursor:pointer; -webkit-user-select:none; color:${this[config].textColor}; \r\n    padding:0px 2px; border-radius:2px; border:1px solid transparent; margin-right:4px; display:flex; align-items:center;`\r\n}\r\nfunction setBackStyle () {\r\n  this[findBack].style.cssText = `cursor:pointer; -webkit-user-select:none; position: relative; height: 20px; width: 20px; border-radius:2px;\r\n    overflow: hidden; display: inline-block; background:${this[config].boxBgColor}; border:0px solid ${this[config].boxBgColor};`\r\n\r\n  let backLine = creatElement('find-back-line')\r\n  backLine.style.cssText = `width:0; height:0; border:7px solid transparent; border-right-color:${this[config].textColor};\r\n    position: absolute; top:3px; left:-1px;`\r\n  this[findBack].appendChild(backLine)\r\n\r\n  let backCover = creatElement('find-back-cover')\r\n  backCover.style.cssText = `width:0; height:0; border:7px solid transparent; border-right-color:inherit;\r\n    position: absolute; top:3px; left:2px; z-index:1001;`\r\n  this[findBack].appendChild(backCover)\r\n}\r\nfunction setForwardStyle () {\r\n  this[findForward].style.cssText = `cursor:pointer; -webkit-user-select:none; position: relative; height: 20px; width: 20px; border-radius:2px;\r\n    overflow: hidden; display: inline-block; background:${this[config].boxBgColor}; border:0px solid ${this[config].boxBgColor};`\r\n\r\n  let forwardLine = creatElement('find-forward-line')\r\n  forwardLine.style.cssText = `width:0; height:0; border:7px solid transparent; border-left-color:${this[config].textColor};\r\n    position: absolute; top:3px; left:6px;`\r\n  this[findForward].appendChild(forwardLine)\r\n\r\n  let forwardCover = creatElement('find-forward-cover')\r\n  forwardCover.style.cssText = `width:0; height:0; border:7px solid transparent; border-left-color:inherit;\r\n    position: absolute; top:3px; left:3px; z-index:1001;`\r\n  this[findForward].appendChild(forwardCover)\r\n}\r\nfunction setCloseStyle () {\r\n  this[findClose].style.cssText = `cursor:pointer; -webkit-user-select:none; position: relative; height: 20px; width: 20px;\r\n    overflow: hidden; display: inline-block; background:${this[config].boxBgColor}; border-radius:2px;`\r\n\r\n  let closeInner1 = creatElement('find-close-inner1')\r\n  closeInner1.style.cssText = `width:14px; height:2px; background:${this[config].textColor}; transform:rotate(45deg);\r\n    position: absolute; top:9px; left:3px;`\r\n  this[findClose].appendChild(closeInner1)\r\n\r\n  let closeInner2 = creatElement('find-close-inner2')\r\n  closeInner2.style.cssText = `width:14px; height:2px; background:${this[config].textColor}; transform:rotate(-45deg);\r\n  position: absolute; top:9px; left:3px;`\r\n  this[findClose].appendChild(closeInner2)\r\n}\r\nfunction appendElement () {\r\n  [this[findInput], this[findMatches], this[findCase], this[findBack], this[findForward], this[findClose]].forEach((item) => { \r\n    this[findBox].appendChild(item) \r\n  })\r\n  this.parentElement.appendChild(this[findBox])\r\n}\r\nfunction removeElement () {\r\n  this.parentElement.removeChild(this[findBox])\r\n}\r\nfunction creatEventHandler () {\r\n  this[documentKeydown] = (function (e) {\r\n    if (!this[hasOpened]) return\r\n    onKeydown.call(this, e)\r\n  }).bind(this)\r\n  this[events].push({ ele: document, name: 'keydown', fn: this[documentKeydown] })\r\n\r\n  this[inputFocus] = (function () {\r\n    this[findInput].style.border = `1px solid ${this[config].inputFocusColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findInput], name: 'focus', fn: this[inputFocus] })\r\n\r\n  this[inputBlur] = (function () {\r\n    this[findInput].style.border = `1px solid ${this[config].inputBgColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findInput], name: 'blur', fn: this[inputBlur] })\r\n\r\n  this[inputEvent] = (function () {\r\n    updateCnt.call(this)\r\n    isInputing.call(this)\r\n      .then(res => {\r\n        res ? '' : onInput.call(this)\r\n      })\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findInput], name: 'input', fn: this[inputEvent] })\r\n\r\n  this[compositionstart] = (function () {\r\n    print('compositionstart')\r\n    this[inComposition] = true\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findInput], name: 'compositionstart', fn: this[compositionstart] })\r\n\r\n  this[compositionend] = (function () {\r\n    print('compositionend')\r\n    this[inComposition] = false\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findInput], name: 'compositionend', fn: this[compositionend] })\r\n\r\n  this[caseMouseenter] = (function () {\r\n    this[findCase].style['background'] = this[config].textHoverBgColor\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findCase], name: 'mouseenter', fn: this[caseMouseenter] })\r\n\r\n  this[caseMouseleave] = (function () {\r\n    this[findCase].style['background'] = this[config].boxBgColor\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findCase], name: 'mouseleave', fn: this[caseMouseleave] })\r\n\r\n  this[caseClick] = (function () {\r\n    onCaseClick.call(this)\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findCase], name: 'click', fn: this[caseClick] })\r\n\r\n  this[backMouseenter] = (function () {\r\n    this[findBack].style['background'] = this[config].textHoverBgColor\r\n    this[findBack].style['border'] = `0px solid ${this[config].textHoverBgColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findBack], name: 'mouseenter', fn: this[backMouseenter] })\r\n\r\n  this[backMouseleave] = (function () {\r\n    this[findBack].style['background'] = this[config].boxBgColor\r\n    this[findBack].style['border'] = `0px solid ${this[config].boxBgColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findBack], name: 'mouseleave', fn: this[backMouseleave] })\r\n\r\n  this[backClick] = (function () {\r\n    onBackClick.call(this)\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findBack], name: 'click', fn: this[backClick] })\r\n\r\n  this[forwardMouseenter] = (function () {\r\n    this[findForward].style['background'] = this[config].textHoverBgColor\r\n    this[findForward].style['border'] = `0px solid ${this[config].textHoverBgColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findForward], name: 'mouseenter', fn: this[forwardMouseenter] })\r\n\r\n  this[forwardMouseleave] = (function () {\r\n    this[findForward].style['background'] = this[config].boxBgColor\r\n    this[findForward].style['border'] = `0px solid ${this[config].boxBgColor}`\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findForward], name: 'mouseleave', fn: this[forwardMouseleave] })\r\n\r\n  this[forwardClick] = (function () {\r\n    onForwardClick.call(this)\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findForward], name: 'click', fn: this[forwardClick] })\r\n\r\n  this[closeMouseenter] = (function () {\r\n    this[findClose].style['background'] = this[config].textHoverBgColor\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findClose], name: 'mouseenter', fn: this[closeMouseenter] })\r\n\r\n  this[closeMouseleave] = (function () {\r\n    this[findClose].style['background'] = this[config].boxBgColor\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findClose], name: 'mouseleave', fn: this[closeMouseleave] })\r\n\r\n  this[closeClick] = (function () {\r\n    onCloseClick.call(this)\r\n  }).bind(this)\r\n  this[events].push({ ele: this[findClose], name: 'click', fn: this[closeClick] })\r\n}\r\n\r\nfunction bindEvents () {\r\n  this[events].forEach((item) => {\r\n    on(item.ele, item.name, item.fn)\r\n  })\r\n}\r\nfunction unbindEvents () {\r\n  this[events].forEach((item) => {\r\n    off(item.ele, item.name, item.fn)\r\n  })\r\n}\r\n\r\nfunction updateCnt () {\r\n  if (this[inputCnt] >= 0xFFFFFFFE) {\r\n    this[inputCnt] = 0\r\n  }\r\n  this[inputCnt]++\r\n}\r\n\r\nfunction isInputing () {\r\n  return new Promise((resolve, reject) => {\r\n    let currCnt = this[inputCnt]\r\n    setTimeout(() => {\r\n      currCnt !== this[inputCnt] ? resolve(true) : resolve(false)\r\n    }, INPUT_INTERVAL_THRESHOLD)\r\n  })\r\n}\r\n\r\nfunction focusInput (doBlur = false) {\r\n  setTimeout(() => { \r\n    doBlur ? this[findInput].blur() : ''\r\n    this[findInput].focus() \r\n  }, 50)\r\n}\r\n\r\nfunction wrapInput (inputEle, caseEle, timeout = 50) {\r\n  inputEle.type = 'password'\r\n  caseEle.style['visibility'] = 'hidden'\r\n\r\n  setTimeout(() => {\r\n    if (inputEle.type !== 'text') {\r\n      print('[FindInPage] wrapInput timeout..')\r\n      unwrapInput(inputEle, caseEle)\r\n    }\r\n  }, timeout)\r\n}\r\nfunction unwrapInput (inputEle, caseEle) {\r\n  inputEle.type = 'text'\r\n  caseEle.style['visibility'] = 'visible'\r\n}\r\n\r\nfunction onInput () {\r\n  setTimeout(() => {\r\n    if (this[inComposition]) return\r\n    this[action] = 'input'\r\n    let text = this[findInput].value\r\n    if (text && text !== this[lastText]) {\r\n      this[lastText] = text\r\n      wrapInput(this[findInput], this[findCase], 100)\r\n      this.startFind(text, true, this[matchCase])\r\n    } else if (this[lastText] && text === '') {\r\n      this.stopFind()\r\n      this[findMatches].innerText = '0/0'\r\n      lockNext.call(this)\r\n      focusInput.call(this, true)\r\n    }\r\n  }, 50)\r\n}\r\n\r\nfunction onKeydown (e) {\r\n  if (this[inComposition] || !e) return\r\n  switch (e.code) {\r\n    case 'Enter':\r\n    case 'NumpadEnter':\r\n      let text = this[findInput].value\r\n      if (!text) return\r\n      e.shiftKey ? findKeep.call(this, false) : findKeep.call(this, true)\r\n      break\r\n    case 'Escape':\r\n      onCloseClick.call(this)\r\n      break\r\n    default: \r\n      break\r\n  }\r\n}\r\n\r\nfunction findKeep (forward) {\r\n  if (!this.isFinding()) return\r\n  forward ? onForwardClick.call(this) : onBackClick.call(this)\r\n}\r\n\r\nfunction onCaseClick () {\r\n  if (!this[matchCase]) {\r\n    this[matchCase] = true\r\n    this[findCase].style['border-color'] = this[config].caseSelectedColor\r\n    wrapInput(this[findInput], this[findCase], 100)\r\n    this.startFind(this[findInput].value, true, this[matchCase])\r\n  } else {\r\n    this[matchCase] = false\r\n    this[findCase].style['border-color'] = 'transparent'\r\n    wrapInput(this[findInput], this[findCase], 100)\r\n    this.startFind(this[findInput].value, true, this[matchCase])\r\n  }\r\n}\r\n\r\nfunction onBackClick () {\r\n  this[action] = 'back'\r\n  wrapInput(this[findInput], this[findCase], 100)\r\n  this.findNext(false, this[matchCase])\r\n}\r\n\r\nfunction onForwardClick () {\r\n  this[action] = 'forward'\r\n  wrapInput(this[findInput], this[findCase], 100)\r\n  this.findNext(true, this[matchCase])\r\n}\r\n\r\nfunction onCloseClick () {\r\n  this.closeFindWindow() ? this.stopFind() : ''\r\n}\r\n\r\nfunction onResult () {\r\n  this.on('result', (activeMatch, matches) => {\r\n    unwrapInput(this[findInput], this[findCase])\r\n    this[findMatches].innerText = `${activeMatch}/${matches}`\r\n    matches > 0 ? unlockNext.call(this) : lockNext.call(this)\r\n    this[action] === 'input' ? focusInput.call(this) : ''\r\n  })\r\n}\r\n\r\nfunction lockNext () {\r\n  this[findBack].style['opacity'] = 0.6\r\n  this[findBack].style['pointer-events'] = 'none'\r\n  this[findForward].style['opacity'] = 0.6\r\n  this[findForward].style['pointer-events'] = 'none'\r\n}\r\n\r\nfunction unlockNext () {\r\n  this[findBack].style['opacity'] = 1\r\n  this[findBack].style['pointer-events'] = 'auto'\r\n  this[findForward].style['opacity'] = 1\r\n  this[findForward].style['pointer-events'] = 'auto'\r\n}\r\n\r\nmodule.exports = FindInPage\r\n","const debug = false\r\nconst print = debug ? console.log.bind(console) : () => {}\r\n\r\nconst on = (() => {\r\n  if (document && document.addEventListener) {\r\n    return (element, event, handler) => {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false)\r\n      }\r\n    }\r\n  } else if (document && document.attachEvent) {\r\n    return (element, event, handler) => {\r\n      if (element && event && handler) {\r\n        element.attachEvent(`on${event}`, handler)\r\n      }\r\n    }\r\n  } else {\r\n    return () => {}\r\n  }\r\n})()\r\n\r\nconst off = (() => {\r\n  if (document && document.removeEventListener) {\r\n    return (element, event, handler) => {\r\n      if (element && event && handler) {\r\n        element.removeEventListener(event, handler, false)\r\n      }\r\n    }\r\n  } else if (document && document.detachEvent) {\r\n    return (element, event, handler) => {\r\n      if (element && event && handler) {\r\n        element.detachEvent(`on${event}`, handler)\r\n      }\r\n    }\r\n  } else {\r\n    return () => {}\r\n  }\r\n})()\r\n\r\nconst once = (element, event, fn) => {\r\n  let listener = function () {\r\n    if (typeof fn === 'function') {\r\n      fn.apply(this, arguments)\r\n    }\r\n    off(element, event, listener)\r\n  }\r\n  on(element, event, listener)\r\n}\r\n\r\nwindow.requestAnimationFrame = window.requestAnimationFrame ||\r\n                              window.webkitRequestAnimationFrame ||\r\n                              window.mozRequestAnimationFrame ||\r\n                              window.msRequestAnimationFrame ||\r\n                              window.oRequestAnimationFrame ||\r\n                              function (callback) {\r\n                                return window.setTimeout(callback, 1000 / 60)\r\n                              }\r\n\r\nwindow.cancelAnimationFrame = window.cancelAnimationFrame ||\r\n                              window.webkitCancelAnimationFrame ||\r\n                              window.mozCancelAnimationFrame ||\r\n                              window.msCancelAnimationFrame ||\r\n                              window.oCancelAnimationFrame ||\r\n                              function (id) {\r\n                                window.clearTimeout(id)\r\n                              }\r\n\r\nconst move = (element, end, duration = 300) => {\r\n  return new Promise((resolve, reject) => {\r\n    try {\r\n      let winFrameId = null\r\n      let stepTime = duration / (1000 / 60)\r\n      let curr = parseInt(element.style.top)\r\n      let stepDist = (end - curr) / stepTime\r\n      let stepCnt = 0\r\n\r\n      const step = function () {\r\n        curr += stepDist\r\n        stepCnt++\r\n        if (stepCnt >= stepTime || (Math.abs(end - curr) <= (stepDist + 1))) {\r\n          element.style.top = `${end}px`\r\n          if (winFrameId) {\r\n            window.cancelAnimationFrame(winFrameId)\r\n            winFrameId = null\r\n          }\r\n          resolve()\r\n        } else {\r\n          element.style.top = `${curr}px`\r\n          winFrameId = window.requestAnimationFrame(step)\r\n        }\r\n      }\r\n      step()\r\n    } catch (error) {\r\n      reject(error)\r\n    }\r\n  })\r\n\r\n  \r\n}\r\n\r\nmodule.exports = {\r\n  print,\r\n  on,\r\n  off,\r\n  once,\r\n  move\r\n}","var fs = require('fs')\nvar path = require('path')\n\nvar pathFile = path.join(__dirname, 'path.txt')\n\nfunction getElectronPath () {\n  if (fs.existsSync(pathFile)) {\n    var executablePath = fs.readFileSync(pathFile, 'utf-8')\n    if (process.env.ELECTRON_OVERRIDE_DIST_PATH) {\n      return path.join(process.env.ELECTRON_OVERRIDE_DIST_PATH, executablePath)\n    }\n    return path.join(__dirname, 'dist', executablePath)\n  } else {\n    throw new Error('Electron failed to install correctly, please delete node_modules/electron and try installing again')\n  }\n}\n\nmodule.exports = getElectronPath()\n","const EventEmitter = require('events')\r\nconst { print } = require('./utils.js')\r\n\r\nconst stopActions = ['clearSelection', 'keepSelection', 'activateSelection']\r\nconst wcs = Symbol('webContents')\r\nconst opts = Symbol('options')\r\nconst requestId = Symbol('requestId')\r\nconst activeMatch = Symbol('activeMatch')\r\nconst matches = Symbol('matches')\r\nconst initd = Symbol('initd')\r\nconst preText = Symbol('preText')\r\n\r\nclass Find extends EventEmitter {\r\n  constructor (webContents, options = {}) {\r\n    super()\r\n    this[wcs] = webContents\r\n    this[opts] = options\r\n    this[requestId] = null\r\n    this[activeMatch] = 0\r\n    this[matches] = 0\r\n    this[initd] = false\r\n    this[preText] = ''\r\n  }\r\n  initFind () {\r\n    if (this[initd]) return false\r\n    if (isWebContents.call(this)) {\r\n      bindFound.call(this)\r\n      return this[initd] = true\r\n    } else {\r\n      throw new Error('[Find] In need of a valid webContents !')\r\n    }\r\n  }\r\n  destroyFind () {\r\n    this[wcs] = null\r\n    this[opts]  = null\r\n    this[requestId] = null\r\n    this[activeMatch] = 0\r\n    this[matches] = 0\r\n    this[initd] = false\r\n    this[preText] = ''\r\n  }\r\n  isFinding () {\r\n    return !!this[requestId]\r\n  }\r\n  startFind (text = '', forward = true, matchCase = false) {\r\n    if (!text) return\r\n    this[activeMatch] = 0\r\n    this[matches] = 0\r\n    this[preText] = text\r\n    this[requestId] = this[wcs].findInPage(this[preText], {\r\n      forward,\r\n      matchCase \r\n    })\r\n    print(`[Find] startFind text=${text} forward=${forward} matchCase=${matchCase}`)\r\n  }\r\n  findNext (forward, matchCase = false) {\r\n    if (!this.isFinding()) throw new Error('Finding did not start yet !')\r\n    this[requestId] = this[wcs].findInPage(this[preText], {\r\n      forward,\r\n      matchCase,\r\n      findNext: true\r\n    })\r\n    print(`[Find] findNext text=${this[preText]} forward=${forward} matchCase=${matchCase}`)\r\n  }\r\n  stopFind (action) {\r\n    stopActions.includes(action) ? '' : action = 'clearSelection'\r\n    this[wcs].stopFindInPage(action)\r\n    print(`[Find] stopFind action=${action}`)\r\n  }\r\n}\r\nfunction isWebContents () {\r\n  return (this[wcs] && \r\n    typeof this[wcs].findInPage === 'function' &&\r\n    typeof this[wcs].stopFindInPage === 'function')\r\n}\r\nfunction bindFound () {\r\n  this[wcs].on('found-in-page', (e, r) => {\r\n    onFoundInPage.call(this, r)\r\n  })\r\n}\r\nfunction onFoundInPage (result) {\r\n  print('[Find] onFoundInPage, ', result)\r\n  if (this[requestId] !== result.requestId) return\r\n  typeof result.activeMatchOrdinal === 'number' ? this[activeMatch] = result.activeMatchOrdinal : ''\r\n  typeof result.matches === 'number' ? this[matches] = result.matches : ''\r\n  result.finalUpdate ? reportResult.call(this) : ''\r\n}\r\nfunction reportResult () {\r\n  this.emit('result', this[activeMatch], this[matches])\r\n  typeof this[opts].onResult === 'function' ? this[opts].onResult(this[activeMatch], this[matches]) : ''\r\n}\r\n\r\nmodule.exports = Find\r\n","const FindInPage =require('./findInPage')\r\nconst Find = require('./find.js')\r\n\r\n\r\nmodule.exports = {\r\n  FindInPage,\r\n  Find\r\n}","/* eslint-disable no-restricted-globals */\n/* eslint-disable func-names */\nimport { shell, remote, ipcRenderer } from 'electron';\nimport { FindInPage } from 'electron-find';\nimport tabMgr from '../tabMgr.js';\n\nclass ElectronPlatform {\n  constructor() {\n    // Fix input stuck\n    // eslint-disable-next-line no-global-assign\n    alert = function (str) {\n      remote.dialog.showMessageBoxSync(null, {\n        type: 'warning',\n        buttons: ['Ok'],\n        defaultId: 0,\n        cancelId: 0,\n        detail: str,\n        message: ''\n      });\n    };\n\n    // eslint-disable-next-line no-global-assign\n    confirm = function (str) {\n      const buttonIdx = remote.dialog.showMessageBoxSync(null, {\n        type: 'question',\n        buttons: ['OK', 'Cancel'],\n        defaultId: 0,\n        cancelId: 1,\n        detail: str,\n        message: ''\n      });\n\n      return buttonIdx === 0;\n    };\n\n    const findInPage = new FindInPage(remote.getCurrentWebContents(), {\n      preload: true,\n      offsetTop: 32,\n      offsetRight: 10\n    });\n\n    ipcRenderer.on('on-find', (e, args) => {\n      findInPage.openFindWindow();\n    });\n\n    ipcRenderer.on('on-home', (e, args) => {\n      tabMgr.open('Tickets');\n    });\n  }\n\n  openUrl(url) {\n    shell.openExternal(url);\n  }\n\n  send(channel, ...args) {\n    ipcRenderer.send(channel, ...args);\n  }\n\n  openPanelWindow(url, sessionId) {\n    ipcRenderer.invoke('open-panel-window', url, sessionId);\n  }\n}\n\nexport default new ElectronPlatform();\n"],"sourceRoot":""}